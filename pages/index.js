import Head from "next/head";
import "../node_modules/bootstrap/dist/css/bootstrap.min.css";
import "bootstrap/dist/css/bootstrap.css";
import { wrapper } from "../redux/index";
import styles from "../styles/Home.module.scss";
import { checkServerSideCookie, getCookieFromServer, reauthenticate } from "../redux/action";
import { useDispatch } from "react-redux";
import { useEffect } from "react";
import FirebaseFunc from "../firebaseconfig";

function Home({ token }) {
  const dispatch = useDispatch();
  useEffect(() => {
    FirebaseFunc();
    dispatch(reauthenticate(token));
  }, []);

  return (
    <div className={styles.container}>
      <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1"
        crossOrigin="anonymous"
      />
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <div className={styles.main}></div>
    </div>
  );
}
//yhn getserversideprop lazmi h HYDRATE call krane klye
export const getServerSideProps = wrapper.getServerSideProps(
  (store) =>
    async ({ req, res }) => {
      console.log("res=========>", res);
      let data = await checkServerSideCookie("tokenss", req);
      return {
        props: {
          token: data,
        },
      };
    }
);
export default Home;
